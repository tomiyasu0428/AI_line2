# 次のステップ：作業計画

## 1. 会話文脈の理解改善

現在の課題：LINEでの会話文脈が適切に理解・処理されていない

### 対応策：
- 会話履歴のフォーマットを検証し、AIエージェントが適切に過去の会話を参照できるようにする
- 複数ターンの会話テストケースを作成し、「明日会議を設定して」→「13時から15時で」のような会話が正しく処理されるか検証
- LangGraphの状態管理をさらに最適化し、会話文脈の理解を向上させる

## 2. LangGraphへの完全移行

### 進捗状況（2025-04-23更新）:
- ✅ LangGraphプロセッサーの基本実装完了（langgraph_processor.py）
- ✅ LINEルーターをLangGraphプロセッサーに切り替え完了
- ✅ 会話履歴管理をLangGraphの状態管理に移行完了
- ✅ 基本的なテストケースの実行確認完了
- ✅ 実際のLINEボットでの動作確認完了
- ✅ 古いLangChainベースの実装（ai_processor.py）の削除完了

### 今後の最適化:
- LangGraphのグラフ構造の最適化
- ツール呼び出しのエラーハンドリングの強化
- パフォーマンスの検証と最適化

## 3. コードの最適化とリファクタリング

### 対応策：
- 未使用のインポートを削除し、コードの整理
- エラーハンドリングの強化
- コメントの追加と改善
- テストカバレッジの向上

## 4. 一般公開に向けた準備

### 対応策：
- データベースをSQLiteからFirebaseに移行する
- 公開のためにサーバーをCloud Runで設定する
- セットアップ手順を詳細に記述したREADMEを作成または更新
- セキュリティ対策の強化（トークン管理、エラーハンドリングなど）
- デプロイ手順の文書化

## 5. 機能拡張

### 対応策：
- グループスケジューリング機能の強化
- 複数カレンダー対応
- リマインダー機能の追加
- 自然言語処理の精度向上

## 優先順位（2025-04-23更新）

1. 会話文脈の理解改善（最優先）
2. コードの最適化とリファクタリング
3. 一般公開に向けた準備
4. 機能拡張
